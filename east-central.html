<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>interactive map</title>
    <style>
      /* ---------- Base path style (your original) ---------- */
      

      svg {
        width: 100%;
        height: 100%;
      }
    </style>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <!--  main top filter  -->

    <!--  main top filter  -->

    <!-- main map container  -->
    <div class="ikr_svg_container">
      <div class="ikr_map5">
        <!-- Generator: Adobe Illustrator 27.4.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->

        <?xml version="1.0" encoding="UTF-8"?>
<svg id="ikr_svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 84.6 110.87">
    <defs>
        <style>.cls-1{fill:#1a3f4b;stroke:#010101;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}.cls-1,.cls-2,.cls-3{fill-rule:evenodd;}.cls-2,.cls-3{fill:#c8934c;}.cls-3{stroke:#231f20;stroke-miterlimit:10;stroke-width:.5px;}</style>
    </defs>
    <g id="Region_4">
        <path class="cls-1" d="m12.63,1.08h4.73s.09.01.09.01h.06s0,.02,0,.02v.13l.03.97v.29h0v.03h0v1.33h0v1.64l.02,1.13.02,1.4v.31l.06,1.02h0l1.27-.03h1.2s.31-.01.31-.01h.5s.08-.01.08-.01h.99s.73-.03.73-.03h1.07s1.09,0,1.09,0h1.52l.52-.02h.06l.68-.02h1.15s.39-.01.39-.01l.86-.02h.48l.97-.02h1.44l.23-.02h1.13s.01-.01.01-.01h.01v.22h0v.34h0v1.25l.02.12v1.54h0v1.9l.02,1.19v.04h0v.29h.01v1.14s.01.21.01.21v.11h0l.73-.02h.12l.62-.02h.07l.67-.02.72-.02h.01l.69-.03h2.67s.01-.01.01-.01h1.13s.14-.01.14-.01h5.66l.16-.02h.51l.44.02h1.84s.12-.01.12-.01h2.34s.02-.01.02-.01h2.45s.11.01.11.01h.92l.59-.02h1.84s.34-.01.34-.01h8.33v1.37s-.01.03-.01.03v.52l-.02,1.31v.14h-.01v2.13s-.01.74-.01.74l-.02.55v1.46h-.01l.02.21.02.13v.11l.03.07v.04l.03.18.02.08v.07l.06.44.03.13.02.11v.04h0v.07l.04.27v.09l.02.06.07.64.08.75.02.21v.06l.04.32.02.18.04.35.03.27.04.33v.1l.02.11v.14s.01.08.01.08v.19l.02.03.02.42v.11l.04.4.09.92v.37h0v.19h0v.04h0v.04h0s-.11.01-.11.01h-.57v.23h0v.28s.01.09.01.09v.09h.03v.1h-.01v.23h0v.19h0v.04h0v.28h0v.35h.43s0-.06,0-.06h.22v.06h0v.16h0v.16h0v.04h0v1.33h0v.63h0v.89h0v1.48h0v.44h0v.46h0v.03h0v.04h.01v.02h.03l.02.02.04.02h-.06l-.03-.03h-.02s0,.02,0,.02l.02.07h0v.23h0v1.19h.17s.03-.01.03-.01h.05s.05-.01.05-.01l.52-.05h.15s.07-.01.07-.01l.3-.03h.25s.05-.01.05-.01h.14l1.24-.07h.72s0,.02,0,.02v.1l.02.02v.04h0v.04h0v.07h0v.21l.03.42v.13h0v2l.02.64v.52l.02.45.03.88v.31l.02.9v.19l.02.52v.59h0v.3l.02.81v1h.01l.02.51v.28h0v1.39l.02.61.02.78v.55l.03.84.02,1.29v2.31h0v1.26s.01.04.01.04v1.51l.02.58h0v.2h0v.51h0v.44h0l.03.8h0v.37s.01.03.01.03h0v.42h-.07v.36h0v.14h0v.41h0v.47h0v.08s.01.04.01.04l.02.08v.03l.03.14.05.31v.27l.02.31v.13l.03.67v.63h0v4.23h4.65s.03-.01.03-.01h.94s.04-.01.04-.01h.6s.03-.01.03-.01h1.81s.29-.01.29-.01h.52l.79-.02h.62s0,.4,0,.4l.02,1.05v.75l.02.07v.22h0v.35l.02.58v.5s.01.31.01.31v.65h0v.63s.01.06.01.06v.62s.01.04.01.04v.21l.02.54h0v.51l.04.88h0l.02.58v.8s.01.25.01.25v.18s.01.27.01.27l.02.34v.29s.01.06.01.06v.12h0v.12l.03,1.16v.45l.02.09v1.07h0v.11l.02.69v.38l.03.49v.33h0v.02l.02.52h0l.02.81.02.81v.02l.03,1.03.02.75.02.75v.45s.04.87.04.87v.08l.02.64v.18l.03.86v.45l.02.36v.32h.01v.35h.01v1.04h.01v1.41s.01.27.01.27v.36h0v.02h0v.76s.03.72.03.72v.43l.02.11h0v.13h-.01v.45h0v.15h0v.06h0v.72h.01v.06h0v.02h0v.26l.03.9v.18h-.05l-1.33.03h-.94s-.06.01-.06.01h-1.08l-.53.02h-.32l-.9.03h-.88s-.06.01-.06.01h-.8s-.07.01-.07.01l-.56.02h-.66l-.08.02h-.01v-3.18l-.02-1v-.17h0v-.09h-.66s-.16.01-.16.01h-.5s-.5.01-.5.01l-.83.02h-.19l-.72.02h-.62s-.01.01-.01.01l-.67.02h-.39s-.9.01-.9.01l-.04.02h-.55l-.08.02h-1.82l-1.15.02h-.59s-.22.01-.22.01h-1.45s-.69.01-.69.01l-1.04.02h-1.04l-.98.02h-.98v.09l.03,1.39v.52l.04,1.19.03,1.19h-3.36s-1.09.01-1.09.01h-2.91l-.09-.02h-.13s-.06.01-.06.01h-1.36s-.02.01-.02.01h-4.91s-.69-.01-.69-.01l-.7.03h-1.41s-.2.01-.2.01h-1.48s-.42.01-.42.01l-.69.02h-.51s-.16.01-.16.01h-1.71s-.15.01-.15.01h-2.24s-.03.01-.03.01h-3.71s-.12.01-.12.01h-.91l-.88.02h-3.53s0-.24,0-.24v-.31l-.02-.3v-.54h0v-.35h-.01v-.89s-.01-.04-.01-.04v-.43l-.03-1.1v-.9h0v-.22h0v-.67h0v-.65l-.02-.36v-.04l-.03-1.4h0v-.35l-.03-.97v-.36h.02-.02v-.02h0v-.38l-.02-1.05v-.92s-.01-.12-.01-.12v-.8l-.02-.66v-.57h0v-.5l-.02-.1h.02l-.02-.87h0v-.33h0v-.14h0v-.11h0v-.48h0v-.51h0v-.84h0v-.07h0v-.02h0v-.09h0v-.03h0v-1.57h0v-.46h0v-.43l-.02-.86-.02-.74-.02-.74-.02-.74-.02-.74h0v-.51s-.01-.02-.01-.02v-.66s-.01-.88-.01-.88v-.59l-.02-.45v-.5l-.02-.54-.02-.76v-.47h0v-.85l-.02-.7-.02-1.27v-.11h0s-1,0-1,0h-.03l-.38.02h-.18l-1.2.02h-8.77l-.06.02h-3.35s-.74.01-.74.01l-.74.02h-1.97s-.16.01-.16.01h-.63s-.51-.01-.51-.01H1.32v-8.39h0v-1.11h0v-.38h.02v-.8l-.02-1.17v-1.03h.01v-.41h0v-.72h0v-1.39h0v-.05h0v-1.24h0v-.52h-.01v-2.98h0v-1.78h0l-.02-.33-.02-.34v-.13h0v-.13l.02-.05h0v-.12h0v-.25h0v-1.67h0v-1.69s-.01-.04-.01-.04v-.73h0v-.11l-.02-.64v-.15h0v-.23l-.02-.51v-.23h0v-.89s.01-.09.01-.09l.02-.15v-.79s-.04-1.29-.04-1.29v-.06h0l-.02-.82h0v-.05h0v-4.22h0v-.66l-.02-.72v-.34h0v-.31h0v-.32h0v-.29h0v-.85l-.02-.85h0v-.05h0v-.66h0v-.19h0v-1.06l-.03-.82h0v-.94h-.01v-.43s-.01-.65-.01-.65h0v-2.14s-.01-.74-.01-.74l-.02-.74h0l-.02-1.39v-1.03s-.01-.28-.01-.28h0v-.09h-.01v-.62h0v-3.52h0v-1.07h0v-.38h0v-1.37h0v-.02h0v-2.43l-.02-1.04v-.75l-.02-.04v-.59h0v-.35h0v-.34h0v-.26s.03-.46.03-.46v-.66h-.01v-.17h0v-.6s-.01-.35-.01-.35v-2.08h0v-1.01l-.02-1.32v-.08h0v-.69s-.01-.25-.01-.25h0v-1.78h.93s.94-.01.94-.01l.9-.03h.45l.57-.02h.87l.87-.02h1.2s.18-.01.18-.01h.59s.1-.01.1-.01h1.41s.97-.02.97-.02l.97-.03h.07l.61-.02v.08Z"/>
    </g>
    <g id="marker">
        <path id="east_central_67" class="cls-2" d="m15.87,53.19c0,3.24-4.22,7.21-5.88,12.62-1.63-5.44-5.88-9.38-5.88-12.62s2.63-5.88,5.88-5.88,5.88,2.63,5.88,5.88Z"/>
        <path id="east_central_68" class="cls-2" d="m55.24,85.43c0,3.24-4.22,7.21-5.88,12.62-1.63-5.44-5.88-9.38-5.88-12.62s2.63-5.88,5.88-5.88,5.88,2.63,5.88,5.88Z"/>
        <path id="east_central_69" class="cls-3" d="m58.44,61.54c0,3.24-4.22,7.21-5.88,12.62-1.63-5.44-5.88-9.38-5.88-12.62s2.63-5.88,5.88-5.88,5.88,2.63,5.88,5.88Z"/>
        <path id="east_central_70" class="cls-3" d="m58.36,56.5c0,3.24-4.22,7.21-5.88,12.62-1.63-5.44-5.88-9.38-5.88-12.62s2.63-5.88,5.88-5.88,5.88,2.63,5.88,5.88Z"/>
    </g>
</svg>

        <div id="ikr_toltipMove">
          <div id="mapTitle"></div>
        </div>
      </div>

      <div class="ikr_rv_detail" id="ikr_rv_detail">
        <div style="position: relative">
          <div id="detail_img" class="ikr_detail_img">
            <img src="" alt="" id="map_img" />
          </div>
          <div class="map_details">
            <p id="pstate_nameId" class="map_title"></p>

            <div id="detail_des" class="detail_des"></div>

            <a
              id="ikr_btnTxt"
              style="display: none"
              class="ikr_map_tooltip_button"
              target="_blank"
              href=""
            >
              Details</a
            >
          </div>
        </div>
      </div>
      <div class="ikr_map_tooltip" id="ikr_map_tooltip"></div>
    </div>
    <!-- end  main map container  -->
<script src="./mapdata.js"></script>
    <script src="./rcost-interactive-single-function.js"></script>
    <script>
      function getAllChildNodeIds(svgElement) {
        const childNodeIds = [];

        // Iterate through all child elements of the SVG
        for (const childElement of svgElement.children) {
          // Check if the child element has an ID attribute
          if (childElement.id) {
            childNodeIds.push(childElement.id);
          }

          // Recursively process child elements
          childNodeIds.push(...getAllChildNodeIds(childElement));
        }

        return childNodeIds;
      }
      const svgElement = document.getElementById("ikr_svg");
      console.log(getAllChildNodeIds(svgElement));
      const mapId =[

  "east_central_67",
  "east_central_68",
  "east_central_69",
  "east_central_70",
];







function renderTooltipContent(mapD) {
  const siteName = mapD.SiteName || "";
  const healthCenter = mapD.HealthCenterName || "";
  const regionName = mapD.RegionName || "";
  const siteAddress = mapD.SiteAddress || "";
  const website = mapD.website || "#";

  const lat = mapD.YCoordinate;
  const lng = mapD.XCoordinate;

  // Google Maps URL using coordinates
  const googleMapUrl =
    lat && lng
      ? `https://www.google.com/maps?q=${lat},${lng}`
      : "#";

  // Optional logos (future-ready)
  const logos = Array.isArray(mapD.logos)
    ? mapD.logos
    : mapD.logo
    ? [mapD.logo]
    : [];

  const logosHTML = logos.length
    ? `
      <div class="tooltip-logos">
        ${logos
          .map(
            (logo) => `
              <img src="${logo}" alt="logo" class="tooltip-logo" />
            `
          )
          .join("")}
      </div>
    `
    : "";

  return `
    <div id="ikr_second_tooltip" class="ikr-tooltip">

      <!-- Close Button -->
      <button
        id="ikrTooltipCloseBtn"
        class="tooltip-close-btn"
        aria-label="Close tooltip">
        âœ•
      </button>

      <h4 class="tooltip-title">${siteName}</h4>

      ${healthCenter ? `<p><strong>Health Center:</strong> ${healthCenter}</p>` : ""}
      ${regionName ? `<p><strong>Region:</strong> ${regionName}</p>` : ""}
      ${siteAddress ? `<p><strong>Address:</strong> ${siteAddress}</p>` : ""}

      <!-- Action Buttons -->
      <div class="tooltip-actions">
        ${
          website
            ? `<a href="${website}" target="_blank" class="tooltip-btn">
                Visit Website
              </a>`
            : ""
        }

        ${
          lat && lng
            ? `<a href="${googleMapUrl}" target="_blank" class="tooltip-btn tooltip-btn-secondary">
                Open in Google Maps
              </a>`
            : ""
        }
      </div>

      ${logosHTML}
    </div>
  `;
}


      init_interactive_map({
        mapData,
        mapId,
        tooltipElementId: "ikr_toltipMove",
        svgElementId: "ikr_svg",
        renderTooltipContent: renderTooltipContent,
        tooltipLeft: 0,
        tooltipTop: 50,
        onLotHoverIn: (el, mapD, ev) => {
          // applyStrokeHover(el,'highlight');
          el.style.fill = "rgba(115, 299, 213, 1";
        },
        onLotHoverOut: (el, mapD, ev) => {
          // clearStrokeHover(el,'highlight');
          el.style.fill = "";
        },
      });

      document.addEventListener("click", function (e) {
        if (e.target.id === "ikrTooltipCloseBtn") {
          const tooltip = document.getElementById("ikr_toltipMove");
          if (tooltip) tooltip.style.display = "none";
        }
      });
    </script>
  </body>
</html>
